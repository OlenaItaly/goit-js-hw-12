{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from \"axios\";\n\nexport async function getImage(q, currentPage) {\n    const BASE_URL= 'https://pixabay.com';\n    const END_POINT = '/api/';\n    const API_KEY = '43059810-21766dfeafea29ca9c24ae0e2';\n     const params = {\n  key: API_KEY,\n         q,\n         page: currentPage,\n    per_page: 15,\n    image_type: \"photo\",\n    orientation: 'horizontal',\n    safesearch: true,\n    };\n\n    const url = `${BASE_URL}${END_POINT}`;\n    const res = await axios.get(url,{params})\n    return res.data;\n   \n}\n         \n","function imageTemplate(data) {\n  const {\n    largeImageURL,\n    webformatURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = data;\n  return `<li class=\"gallery-item\">\n\t<a class=\"gallery-link\" href=\"${largeImageURL}\">\n\t\t<img\n            src=\"${webformatURL}\"\n            alt=\"${tags}\"\n            width=\"360\"\n            height=\"200\"\n            class=\"gallery-img\"\n            loading=\"lazy\"\n        />\n        <ul class=\"gallery-descript\">\n        <li class=\"gallery-descript__item\"><p class=\"gallery-descript__p\">likes</p> ${likes}</li>\n        <li class=\"gallery-descript__item\"><p class=\"gallery-descript__p\">Views</p> ${views}</li>\n        <li class=\"gallery-descript__item\"><p class=\"gallery-descript__p\">Coments</p> ${comments}</li>\n        <li class=\"gallery-descript__item\"><p class=\"gallery-descript__p\">Dowloads</p> ${downloads}</li>\n     </ul>\n\t</a>\n</li>`;\n}\n\nexport function imagesTemplate(arr) {\n  return arr.map(imageTemplate).join('');\n}\n\n","import { getImage} from \"./js/pixabay-api\";\nimport { imagesTemplate } from \"./js/render-functions\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\n\nconst form = document.querySelector('.js-search-form');\nconst listElement = document.querySelector('.js-gallery');\nconst loaderEl = document.querySelector('.loader');\nconst btnLoadMore = document.querySelector('.js-load-more');\n\nform.addEventListener('submit', handlerSubmit);\nbtnLoadMore.addEventListener('click', onLoadMoreClick);\n\nconst lightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n// ================================================\n\nlet searchQuery;\nlet currentPage = 1;\nlet maxPage = 0;\nconst pageSize = 15;\n\n// =================================================\n\nasync function handlerSubmit(event) {\n    event.preventDefault()\n    \n     listElement.innerHTML = '';\n    currentPage = 1;\n    searchQuery = event.target.elements.input_search.value.trim();\n    if (!searchQuery) {\n        iziToast.info({\n            position: \"topRight\",\n            message: \"INPUT SEARCH\"\n        })\n        hiddenLoadMore();\n        return\n    }\n   \n    try {\n        showLoader();\n        const data = await getImage(searchQuery, currentPage);\n      \n\n        maxPage = Math.ceil(data.totalHits / pageSize);\n\n        if (!data.hits.length) {\n            iziToast.error({\n                position: \"topRight\",\n                message: \"Sorry, there are no images matching your search query. Please try again!\"\n            });\n            hiddenLoadMore();\n            loaderEl.classList.add('is-hidden');\n            form.reset();\n            return\n        }\n       \n        renderImages(data.hits);\n    } catch (err) {\n        console.log(err);\n    }\n    hiddenLoader();\n        lightbox.refresh();\n   \n    form.reset();\n    \n    checkBtnLoadMoreStatus();\n   \n}\n\n\n\nasync function onLoadMoreClick() {\n    showLoader();\n    currentPage += 1;\n    try {\n        const data = await getImage(searchQuery, currentPage);\n        // list.innerHTML = imagesTemplate(data.hits);\n        renderImages(data.hits);\n    } catch (err) {\n        console.log(err);\n    }\n   \n    lightbox.refresh();\n \n    checkBtnLoadMoreStatus();\n    hiddenLoader();\n    myScroll();\n}\n\n\n// =====================================\nfunction showLoadMore() {\n    btnLoadMore.classList.remove('is-hidden');\n}\n\nfunction hiddenLoadMore() {\n    btnLoadMore.classList.add('is-hidden');\n}\n\nfunction checkBtnLoadMoreStatus() {\n    if (currentPage >= maxPage) {\n        hiddenLoadMore();\n    } else {\n        showLoadMore();\n    }\n}\n\nfunction showLoader() {\n    loaderEl.classList.remove('is-hidden');\n}\n\nfunction hiddenLoader() {\n     loaderEl.classList.add('is-hidden');\n}\n// =====================================\nfunction renderImages(arr) {\n  const markup = imagesTemplate(arr);\n    listElement.insertAdjacentHTML('beforeend', markup);\n}\n// =======================================\n\nfunction myScroll() {\n    const heightCard = listElement.firstChild.getBoundingClientRect().height;\n    console.log(heightCard);\n    scrollBy({\n        top: heightCard * 2,\n        behavior: 'smooth',\n    });\n}"],"names":["getImage","q","currentPage","BASE_URL","END_POINT","params","url","axios","imageTemplate","data","largeImageURL","webformatURL","tags","likes","views","comments","downloads","imagesTemplate","arr","form","listElement","loaderEl","btnLoadMore","handlerSubmit","onLoadMoreClick","lightbox","SimpleLightbox","searchQuery","maxPage","pageSize","event","iziToast","hiddenLoadMore","showLoader","renderImages","err","hiddenLoader","checkBtnLoadMoreStatus","myScroll","showLoadMore","markup","heightCard"],"mappings":"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"}